# Production Environment Configuration
# Copy this file to .env.production and update with production values

# ===== REQUIRED PRODUCTION SETTINGS =====

# Next.js Configuration
NODE_ENV=production
NEXT_PUBLIC_APP_URL=https://dashboard.tachi.app

# Blockchain Network Configuration
NEXT_PUBLIC_CHAIN_ID=8453
NEXT_PUBLIC_BASE_RPC_URL=https://base-mainnet.g.alchemy.com/v2/YOUR_ALCHEMY_API_KEY
NEXT_PUBLIC_ALCHEMY_API_KEY=your_production_alchemy_api_key_here

# Smart Contract Addresses (Base Mainnet)
NEXT_PUBLIC_CRAWLNFT_ADDRESS=0x_your_production_crawlnft_address
NEXT_PUBLIC_PAYMENTPROCESSOR_ADDRESS=0x_your_production_paymentprocessor_address
NEXT_PUBLIC_PROOF_LEDGER_ADDRESS=0x_your_production_proof_ledger_address
NEXT_PUBLIC_USDC_ADDRESS=0x833589fCD6eDb6E08f4c7C32D4f71b54bdA02913

# WalletConnect (Get from https://cloud.walletconnect.com/)
NEXT_PUBLIC_WALLETCONNECT_PROJECT_ID=your_32_character_project_id_here

# Account Abstraction (Alchemy)
NEXT_PUBLIC_ALCHEMY_GAS_POLICY_ID=your_alchemy_gas_policy_id_here

# ===== SECURITY CONFIGURATION =====

# CSRF Protection (CRITICAL: Generate secure random value)
CSRF_SECRET=your_super_secure_csrf_secret_here_minimum_32_characters

# Security Monitoring
ENABLE_SECURITY_LOGGING=true
SECURITY_WEBHOOK_URL=https://your-monitoring-service.com/webhooks/security
SECURITY_WEBHOOK_TOKEN=your_secure_webhook_token_here

# Rate Limiting Configuration
ENABLE_RATE_LIMIT=true
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW=900000

# Request Size Limits
MAX_REQUEST_SIZE=1048576

# ===== OPTIONAL INTEGRATIONS =====

# Analytics (Optional)
NEXT_PUBLIC_ANALYTICS_ID=your_analytics_id_here

# Error Monitoring (Optional)
SENTRY_DSN=https://your-sentry-dsn-here

# ===== CLOUDFLARE WORKER ENVIRONMENT =====
# These should be set in Cloudflare Worker environment variables

# Blockchain Configuration
BASE_RPC_URL=https://base-mainnet.g.alchemy.com/v2/YOUR_ALCHEMY_API_KEY
PAYMENT_PROCESSOR_ADDRESS=0x_your_production_paymentprocessor_address
PROOF_OF_CRAWL_LEDGER_ADDRESS=0x_your_production_proof_ledger_address
USDC_ADDRESS=0x833589fCD6eDb6E08f4c7C32D4f71b54bdA02913
PUBLISHER_ADDRESS=0x_your_publisher_wallet_address
CRAWL_TOKEN_ID=your_nft_token_id
PRICE_USDC=1.0

# Private Key (Store as Cloudflare Secret)
PRIVATE_KEY=0x_your_private_key_here

# Security Configuration
RATE_LIMIT_REQUESTS=60
MAX_REQUEST_SIZE=1048576
ENABLE_LOGGING=true

# ===== DEPLOYMENT CHECKLIST =====

# 1. Security Pre-Deployment
# [ ] Generate secure CSRF_SECRET (minimum 32 characters)
# [ ] Set up security monitoring webhook
# [ ] Verify all contract addresses are correct for mainnet
# [ ] Test rate limiting doesn't impact normal users
# [ ] Validate CSRF protection works on all forms

# 2. Blockchain Pre-Deployment  
# [ ] Deploy contracts to Base mainnet
# [ ] Verify contracts on Basescan
# [ ] Test payment flows on mainnet
# [ ] Fund publisher wallet with ETH for gas
# [ ] Verify USDC contract address

# 3. Infrastructure Pre-Deployment
# [ ] Set up production domain with SSL
# [ ] Configure CloudFlare for DDoS protection
# [ ] Set up monitoring and alerting
# [ ] Create backup and recovery procedures
# [ ] Test disaster recovery plan

# 4. Post-Deployment Verification
# [ ] Verify all security headers are present
# [ ] Test CSRF protection
# [ ] Verify rate limiting works
# [ ] Test payment flows end-to-end
# [ ] Verify security monitoring is working
# [ ] Run security scan
# [ ] Monitor error rates and performance

# ===== SECURITY COMMANDS =====

# Generate secure CSRF secret:
# node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"

# Test security headers:
# curl -I https://dashboard.tachi.app

# Verify CSP:
# Check browser console for CSP violations

# Test rate limiting:
# Use tool like Apache Bench (ab) or curl in a loop

# ===== MONITORING & ALERTING =====

# Security Events to Monitor:
# - Rate limit violations > 10/minute
# - CSRF failures > 5/minute  
# - Input validation errors > 20/minute
# - Suspicious request patterns
# - Failed payment verifications

# Performance Metrics to Monitor:
# - Response time < 500ms average
# - Error rate < 1%
# - Uptime > 99.9%
# - Memory usage < 80%

# ===== BACKUP & RECOVERY =====

# Critical Data to Backup:
# - Environment configuration
# - Contract deployment artifacts
# - Security event logs
# - Application logs

# Recovery Procedures:
# 1. Verify backup integrity
# 2. Test deployment in staging
# 3. Monitor security events during recovery
# 4. Validate all functionality post-recovery
